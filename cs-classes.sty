\ProvidesPackage{cs-classes}

% Support for mathbb-like digits
\DeclareMathAlphabet{\digitsbb}{U}{bbold}{m}{n}

%%% Change classical symbols
\let\temp\phi
\let\phi\varphi
\let\varphi\temp
\renewcommand{\epsilon}{\varepsilon}
\renewcommand{\emptyset}{\varnothing}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}

%%% Usefull new commands
% Special maths letters
\newcommand{\A}{\mathcal{A}} % Automata
\newcommand{\Ab}{\mathbb{A}} % Semantic arrays set
\newcommand{\B}{\mathbb{B}} % Boolean set
\newcommand{\C}{\mathbb{C}} % Complex numbers
\newcommand{\Cc}{\mathcal{C}} % Configuration space
\newcommand{\D}{\mathcal{D}} % Distribution
\newcommand{\Ds}{\mathscr{D}}
\newcommand{\Ec}{\mathcal{E}} % Semantic expressions
\newcommand{\F}{\mathcal{F}} % Function set
\newcommand{\G}{\mathcal{G}} % Graph
\newcommand{\Hc}{\mathcal{H}} % Hilbert space
\newcommand{\I}{\mathbb{I}} % Semantic integers
\renewcommand{\L}{\mathcal{L}} % Loss function
\newcommand{\N}{\mathbb{N}} % Natural numbers
\newcommand{\Nc}{\mathcal{N}} % Normal distribution
\newcommand{\Pc}{\mathcal{P}} % Parts of a set
\newcommand{\Q}{\mathbb{Q}} % Rationnal numbers
\newcommand{\R}{\mathbb{R}} % Real numbers
\newcommand{\Rc}{\mathcal{R}}
\renewcommand{\S}{\mathcal{S}} % Semantic
\newcommand{\Sb}{\mathbb{S}} % Symmetric matrices
\newcommand{\T}{\mathcal{T}}
\newcommand{\X}{\mathcal{X}} % Input set
\newcommand{\Y}{\mathcal{Y}} % Output set
\newcommand{\Z}{\mathbb{Z}} % Relative numbers
\newcommand{\Zc}{\mathcal{Z}} % Some set

% Probability
\newcommand{\E}{\mathbb{E}} % expectation
\renewcommand{\P}{\mathbb{P}} % probability
\newcommand{\V}{\mathbb{V}} % variance
\DeclareMathOperator*{\Cov}{Cov} % covariance

% Machine learning
\newcommand{\risk}{\mathcal{R}} % risk
\newcommand{\emrisk}{\hat{\mathcal{R}}} % empirical risk
\newcommand{\exrisk}{\mathscr{R}} % excess risk
\newcommand{\hatf}{\hat{f}}
\newcommand{\htheta}{\hat{\theta}}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\KL}{D_{\mathrm{KL}}} % Kullback-Leibler divergence
\DeclareMathOperator{\ReLU}{ReLU}
\DeclareMathOperator{\softmax}{softmax}
\DeclareMathOperator{\JSD}{JSD} % Jensen-Shannon divergence

% Linear Algebra
\DeclareMathOperator{\im}{Im} % image
\DeclareMathOperator{\Ker}{Ker} % kernel
\DeclareMathOperator{\rg}{rg} % rank
\DeclareMathOperator{\rank}{rank} % rank
\DeclareMathOperator{\Tr}{Tr} % trace
\newcommand{\tp}{\top} % Transpose
\DeclareMathOperator{\diag}{diag} % diagonal matrix

\DeclareMathOperator*{\Conv}{Conv} % Convex Hull
\DeclareMathOperator*{\Span}{Span} % Convex Hull
\DeclareMathOperator*{\dom}{dom} % Effective domain
\DeclareMathOperator*{\epi}{epi} % Epigraph
\DeclareMathOperator*{\dist}{dist} % Epigraph

\DeclareMathOperator*{\SO}{SO} % Special Orthogonal group
\DeclareMathOperator*{\so}{so}
\DeclareMathOperator*{\SE}{SE} % Special Euclidian group
\DeclareMathOperator*{\se}{se} % Special Euclidian group

% Topology
\DeclareMathOperator{\interior}{int} % Interior
\DeclareMathOperator{\relint}{relint} % Relative interior

% Semantics
\DeclarePairedDelimiter{\sem}{\llbracket}{\rrbracket}
\newcommand{\until}{\mathfrak{U}}
\newcommand*{\trace}[1]{\langle #1 \rangle}

% Misc.
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}
\newcommand{\dd}{\,\mathrm{d}} % Derivative d
\DeclarePairedDelimiter{\openseg}{\rbrack}{\lbrack} % Open segment ]a, b[
\DeclareMathOperator*{\atantwo}{atan2}
\DeclareMathOperator*{\minimize}{minimize\:}
\DeclareMathOperator*{\maximize}{maximize\:}
\newcommand*{\subj}{\quad\text{subject to}\quad}
\DeclareMathOperator*{\sign}{sign}

% Other
\newcommand*{\set}[2]{\left\{\,#1 \: \middle| \: #2\,\right\}} % Set of the form { x | y }
\newcommand*{\inner}[2]{\left\langle#1 \, \middle| \, #2\right\rangle} % Inner product <·|·>
\newcommand*{\iset}[2]{\sem{#1, #2}} % Integer set with double bars
\newcommand*{\roundsem}[1]{\llparenthesis #1 \rrparenthesis}
\newcommand*{\ind}{\mathds{1}} % Indicator
\newcommand*{\false}{\textnormal{false}}
\newcommand*{\true}{\textnormal{true}}
\newcommand*{\hoare}[3]{\left\{#1\right\} \; #2 \; \left\{#3\right\}} % Hoare triple
\newcommand*{\sqhoare}[3]{\left[#1\right] \; #2 \; \left[#3\right]} % Square Hoare triple
\newcommand*{\mathpdf}[1]{\texorpdfstring{$#1$}{#1}} % Used to add math in title without causing a PDF error
\newcommand*{\where}{\quad\textnormal{where}\quad}
\newcommand*{\partfrac}[2]{\frac{\partial#1}{\partial#2}} % ∂f/∂x
\newcommand\hcancel[2][black]{\setbox0=\hbox{$#2$} % Strikeout in math mode
\rlap{\raisebox{.35\ht0}{\textcolor{#1}{\rule{\wd0}{1.5pt}}}}#2} 


%%% Custom environments
% Grammar in math mode
\newenvironment{mgrammar}
    {
    \setlength\tabcolsep{4pt}
    \begin{tabular}{>{$}l<{$}>{$}r<{$}>{$}l<{$} r}
    }
    { 
    \end{tabular}
    }

% Grammar in text mode
\newenvironment{grammar}
    {
    \setlength\tabcolsep{4pt}
    \begin{tabular}{l r l r}
    }
    { 
    \end{tabular}
    }

% Command for grammar lines
\newcommand*{\firstrule}[3]{#1 &::= & #2& \quad \ifstrempty{#3}{}{\textit{(#3)}}\\}
\newcommand*{\grule}[2]{&| &#1& \quad \ifstrempty{#2}{}{\textit{(#2)}}\\}
\newcommand*{\gskip}{&&\\}

% TikZ macros
\newcommand*{\parallelepiped}[8]{
    \pgfmathsetmacro{\cubex}{#2}
    \pgfmathsetmacro{\cubey}{#3}
    \pgfmathsetmacro{\cubez}{#4}

    \draw[fill=#8, thick, line join=round] #1 -- ++ (-\cubex,0,0) -- node[left, pos=.5] {#6} ++ (0,-\cubey,0) -- node[below, pos=.5] {#5} ++(\cubex,0,0) --  cycle;
    \draw[fill=#8!gray!80, thick, line join=round] #1 -- ++(0,0,-\cubez) -- ++(0,-\cubey,0) -- node[right=2, pos=.5] {#7} ++(0,0,\cubez) -- cycle;
    \draw[fill=#8, thick, line join=round] #1 -- ++(-\cubex,0,0) -- ++(0,0,-\cubez) -- ++(\cubex,0,0) -- cycle;
}